name: å‰ç«¯æµ‹è¯• (Frontend Test)

on:
  # ä»…æ‰‹åŠ¨è§¦å‘
  workflow_dispatch:
    inputs:
      reason:
        description: "è¿è¡Œå‰ç«¯æµ‹è¯•çš„åŸå› "
        required: true
        default: "å‰ç«¯åŠŸèƒ½éªŒè¯"

jobs:
  frontend_test:
    name: æµ‹è¯•å‰ç«¯
    runs-on: ubuntu-latest

    steps:
      - name: ğŸš€ æ£€å‡ºä»£ç 
        uses: actions/checkout@v4
        with:
          fetch-depth: 0

      - name: ğŸ“¦ è®¾ç½® Node.js
        uses: actions/setup-node@v4
        with:
          node-version: "18"
          cache: "npm"
          cache-dependency-path: "./frontend/package.json"

      - name: ğŸ“¥ å®‰è£…å‰ç«¯ä¾èµ–
        working-directory: ./frontend
        run: npm ci --no-fund

      - name: ğŸ§ª è¿è¡Œå‰ç«¯æµ‹è¯•
        working-directory: ./frontend
        run: npm test

      - name: ğŸ” è¿è¡Œå‰ç«¯ä»£ç æ£€æŸ¥
        working-directory: ./frontend
        run: npm run lint

      - name: ğŸ—ï¸ æ„å»ºå‰ç«¯
        working-directory: ./frontend
        run: npm run build

      - name: ğŸ“¤ ä¸Šä¼ æ„å»ºäº§ç‰©
        uses: actions/upload-artifact@v4
        with:
          name: frontend-build
          path: frontend/build
          retention-days: 7
